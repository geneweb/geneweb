(env (dev (flags (-w -33) ) ) )

#ifdef API
(executable
  (name marshal_dico_place)
  (public_name geneweb.marshal_dico_place)
  (libraries unix %%%GWDB_PKG%%% %%%SOSA_PKG%%% geneweb)
  (modules marshal_dico_place)
)
#else
(dirs :standard \ dico_place)
#endif

#ifdef GENEWEB_GWDB_LEGACY
(executable
  (name gwgc)
  (public_name geneweb.gwgc)
  (modules gwgc)
  (preprocess (action (run %{bin:cppo} %%%CPPO_D%%% %{input-file})))
  (libraries unix str %%%GWDB_PKG%%% %%%SOSA_PKG%%% geneweb)
)
#else
(dirs :dirs \ gwgc)
#endif

(library
 (name wserver)
 (public_name geneweb.wserver)
 (wrapped false)
 (libraries geneweb.util unix)
 (modules wserver)
)

(executable
  (name consang)
  (public_name geneweb.consang)
  (modules consang)
  (preprocess (action (run %{bin:cppo} %%%CPPO_D%%% %{input-file})))
  (libraries unix %%%GWDB_PKG%%% %%%SOSA_PKG%%% geneweb)
)

(executable
  (name gwc)
  (public_name geneweb.gwc)
  (modules gwc db1link)
  (preprocess (action (run %{bin:cppo} %%%CPPO_D%%% %{input-file})))
  (libraries unix %%%GWDB_PKG%%% %%%SOSA_PKG%%% geneweb)
)

(executable
  (name ged2gwb)
  (public_name geneweb.ged2gwb)
  (modules ged2gwb)
  (libraries unix str camlp5.gramlib %%%GWDB_PKG%%% %%%SOSA_PKG%%% geneweb)
)

(executable
  (name gwfixbase)
  (public_name geneweb.gwfixbase)
  (modules gwfixbase)
  (libraries unix str %%%GWDB_PKG%%% %%%SOSA_PKG%%% geneweb)
)

(include_subdirs unqualified)

(library
  (name gwexport_lib)
  (public_name geneweb.gwexport_lib)
  (wrapped false)
  (libraries geneweb %%%GWDB_PKG%%% %%%SOSA_PKG%%%)
  (preprocess (action (run %{bin:cppo} %%%CPPO_D%%% %{input-file})))
  (modules gwexport)
)

(library
  (name gwu_lib)
  (public_name geneweb.gwu_lib)
  (wrapped false)
  (libraries geneweb gwexport_lib %%%GWDB_PKG%%% %%%SOSA_PKG%%%)
  (preprocess (action (run %{bin:cppo} %%%CPPO_D%%% %{input-file})))
  (modules gwuLib)
)

(executable
  (name gwu)
  (public_name geneweb.gwu)
  (modules gwu)
  (libraries geneweb gwexport_lib gwu_lib str unix %%%GWDB_PKG%%% %%%SOSA_PKG%%%)
)

(library
  (name gwb2ged_lib)
  (public_name geneweb.gwb2ged_lib)
  (wrapped false)
  (libraries geneweb gwexport_lib %%%GWDB_PKG%%% %%%SOSA_PKG%%%)
  (preprocess (action (run %{bin:cppo} %%%CPPO_D%%% %{input-file})))
  (modules gwb2gedLib)
)

(executable
  (name gwb2ged)
  (public_name geneweb.gwb2ged)
  (modules gwb2ged)
  (libraries geneweb gwb2ged_lib gwu_lib str unix %%%GWDB_PKG%%% %%%SOSA_PKG%%%)
)

(library
  (name gwd_lib)
  (public_name geneweb.gwd_lib)
  (wrapped true)
  (libraries geneweb wserver %%%GWDB_PKG%%% %%%SOSA_PKG%%%)
  (preprocess (action (run %{bin:cppo} %%%CPPO_D%%% %{input-file})))
  (modules gwdPlugin request sendImage)
)

(executable
  (name gwd)
  (public_name geneweb.gwd)
  (flags -linkall)
  (libraries
    dynlink
    geneweb
    gwd_lib
    gwxjg
    str
    unix
    wserver
    %%%GWDB_PKG%%%
    %%%SOSA_PKG%%%
  )
  (preprocess (action (run %{bin:cppo} %%%CPPO_D%%% %{input-file})))
  (modules
    gwd
    gwdPluginDep
    gwdPluginMD5
    gwdPluginMETA
    robot
  )
)

(executables
  (names connex gwdiff update_nldb)
  (public_names geneweb.connex geneweb.gwdiff geneweb.update_nldb)
  (modules connex gwdiff update_nldb)
  (libraries unix str %%%GWDB_PKG%%% %%%SOSA_PKG%%% geneweb)
)

(executable
  (name setup)
  (public_name geneweb.setup)
  (modules setup)
  (libraries unix str wserver %%%GWDB_PKG%%% %%%SOSA_PKG%%% geneweb)
)
