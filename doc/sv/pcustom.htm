<HEAD><TITLE>GeneWeb - Modifiering av sidor</TITLE>
</HEAD>
<body background="../images/gwback.jpg">
<table border=0 width="100%">
<tr>
<td>
<a href="http://opensource.geneanet.org/projects/geneweb/"><img 
 src="../images/gwlogo.png" align=left border=0 alt=GeneWeb></a>
</td>
<td align=left>
<h1><font color=#2f6400>GeneWeb - Modifiering av sidor</font></h1>
</td>
</tr>
</table>
</font>
<br><br>

<P>Denna sida beskriver hur man modifierar v&auml;lkomstsidan och g&ouml;ra associerade
 sidor. Det &auml;r skrivet f&ouml;r personer som redan har anv&auml;nt
 <FONT COLOR=#2f6400><B>GeneWeb</B></FONT> och som vill g&aring; in p&aring; detaljer. </P>

<UL>
<LI><A HREF="#Wel">V&auml;lkomstsidan</A> </LI>
<LI><A HREF="#Mac">Makros</A> </LI>
<LI><A HREF="#Ass">Associerade sidor</A> </LI>
<LI>Modifiering av <A HREF="#All">alla sidor</A> </LI>
</UL>

<HR>
<H3><font color=#2f6400><A NAME="Wel">V&auml;lkomstsidan</A></font></H3>
<P>V&auml;lkomstsidan &auml;r uppbyggd fr&aring;n en textfil, "start.txt" som ing&aring;r
i <FONT COLOR=#2f6400><B>GeneWeb</B></FONT>. Det &auml;r m&ouml;jligt att modifiera
denna fil och/eller g&ouml;ra en speciell version f&ouml;r en databas. </P>
<P>Denna fil inneh&aring;ller HTML kod mixat med "makros" (se n&auml;sta del). Om du vill
 skapa eller &auml;ndra en s&aring;dan fil, anv&auml;nd inte en HTML editor, utan en
 normal texteditor. </P>
<P>F&ouml;r att skapa v&auml;lkomstsidan f&ouml;r databasen "foo", kommer
<FONT COLOR=#2f6400><B>GeneWeb</B></FONT> att leta efter f&ouml;ljande filer,
i denna ordning: </P>

<UL>
<LI>bdir/lang/lg/foo.txt </LI>
<LI>hdir/lang/lg/foo.txt </LI>
<LI>bdir/lang/foo.txt </LI>
<LI>hdir/lang/foo.txt </LI>
<LI>bdir/lang/lg/start.txt </LI>
<LI>hdir/lang/lg/start.txt </LI>
<LI>bdir/lang/start.txt </LI>
<LI>hdir/lang/start.txt </LI></UL>

<P>d&auml;r: </P>

<UL>
<LI>"bdir" = v&auml;rdet av "-bd" till kommandot "gwd" (default: nuvarande katalog). </LI>
<LI>"hdir" = v&auml;rdet av "-hd" till kommandot "gwd" (default: nuvarande katalog). </LI>
<LI>"lg" = nuvarande spr&aring;k. </LI></UL>

<P>Filen "hdir/lang/lg/start.txt" ing&aring;r. F&ouml;r att skapa den modifierade filen, &auml;r det enklast att starta fr&aring;n en kopia av filen "start.txt" som du sedan kan &auml;ndra som du vill. Om presentationen av filen "start.txt" inte passar dig kan du ocks&aring; &auml;ndra den direkt. </P>
<P>En varning: fr&aring;n en version av <FONT COLOR=#2f6400><B>GeneWeb</B></FONT> till n&auml;sta kan filen "start.txt" ha f&ouml;rb&auml;ttrats. Om du installerar en ny version och vill dra nytta av f&ouml;rb&auml;ttringarna, titta i filen "start.txt" f&ouml;r att se var den har &auml;ndrats och kopiera in dessa &auml;ndringar i din modifierade fil. </P>

<HR>
<H3><font color=#2f6400>Makro<A NAME="Mac">s</A></font></H3>
<P>Som sades tidigare, v&auml;lkomstsidan &auml;r inte i ren HTML kod. Den inneh&aring;ller "makros". Det &auml;r sekvenser som b&ouml;rjar med ett tecken "%" f&ouml;ljt av en bokstav. Exempel: "%s", "%x", etc. </P>
<P>Dessa makros bytts ut mot v&auml;rden vilka beror p&aring; sammanhanget: namnet p&aring; databasen, spr&aring;ket, antal personer i databasen, etc. </P>
<P>Det &auml;r ocks&aring; en speciell behandling f&ouml;r hakarna "[" och "]": om texten mellan hakarna &auml;r &ouml;versatt till det nuvarande spr&aring;ket fr&aring;n lexikonet (filen "lexicon.txt") med de f&ouml;ljande modifieringarna: </P>

<UL>
<LI>Om det &auml;r en stj&auml;rna efter start haken, &auml;r den f&ouml;rsta bokstaven av &ouml;vers&auml;ttningen om gjord till versal. </LI>
<LI>Om den avslutande haken &auml;r f&ouml;ljt av ett nummer, korresponderar det till den N-2 f&ouml;rekomsten f&ouml;r &ouml;vers&auml;ttningen (startar med 0), f&ouml;rekomsterna &auml;r separerade med "/". Om denna f&ouml;rekomst inte existerar, tas den f&ouml;rsta. </LI></UL>

<P>F&ouml;r att f&ouml;rst&aring; hur makros anv&auml;nds, &auml;r det b&auml;st att titta p&aring; filen "start.txt" som ing&aring;r. </P>
<P>H&auml;r &auml;r betydelsen f&ouml;r makrona "%": </P>

<UL>
<LI><STRONG>Databas. </LI>

<UL>
</STRONG><LI>"<TT>%t</TT>": namnet p&aring; databasen. </LI>
<LI>"<TT>%f</TT>": i server mod, namnet p&aring; databasen, f&ouml;ljt av ett m&ouml;jligt passord (t.ex.: "foo_xyzzy"); i CGI mod, namnet p&aring; CGI kommandot (t.ex.: "gwd.exe"). </LI>
<LI>"<TT>%g</TT>": i server mod, som "%f"; i CGI mode, namnet p&aring; CGI kommandot f&ouml;ljt av "?b=", namnet p&aring; databasen och ett semikolon (t.ex.: "gwd.exe?b=foo;"). </LI>
<LI>"<TT>%s</TT>": v&auml;rdet av "%f" f&ouml;ljt av ett fr&aring;getecken och variabler beroende p&aring; sammanhanget (se nedan) f&ouml;ljt av ett semikolon. T.ex.: "foo?lang=it;iz=8233;". </LI></UL>

<LI><STRONG>Uppr&auml;kning. </LI>

<UL>
</STRONG>
<LI>"<TT>%c</TT>": antal &aring;tkomster till v&auml;lkomstsidan. </LI>
<LI>"<TT>%q</TT>": antal f&ouml;rfr&aring;gningar. </LI>
<LI>"<TT>%d</TT>": datum f&ouml;r den f&ouml;rsta konsultationen. </LI></UL>

<li><strong>Villkor.</strong><br>

Villkor startar med "<font size=+1><tt>%I</tt></font>" följt av
ett boolskt uttryck (sant eller falskt) och slutar med "<font
size=+1><tt>%E</tt></font>". Texten mellan dessa två makron visas
endast om det boolska uttrycket är sant. Det boolska uttrycket
är antingen:

<ul>

<li>"<font size=+1><tt>f</tt></font>" : vi är "friend"

<li>"<font size=+1><tt>w</tt></font>" : vi är "wizard"

<li>"<font size=+1><tt>j</tt></font>" : vi är "wizard" men bara "friend"
(se vidare <a href="start.htm#Cnf">filen a.gwf</a>, "wizard_just_friend")

<li>"<font size=+1><tt>c</tt></font>" : vi är i CGI mod

<li>"<font size=+1><tt>h</tt></font>" : det finns en historie fil

<li>"<font size=+1><tt>l</tt></font>" : webbläsaren klarar inte tabeller

<li>"<font size=+1><tt>n</tt></font>" : det finns noteringar för databasen

<li>"<font size=+1><tt>t</tt></font>" : det är en sökning efter titlar

<li>"<font size=+1><tt>z</tt></font>" : det är en person vald som proband för navigering enligt Kekules system (se makro "<font size=+1><tt>%u</tt></font>")

<li>"<font size=+1><tt>a</tt></font>" : det finns en <a
href="access.htm#DBA">global åtkomst restriktion</a> för databasen

<li>"<font size=+1><tt>N</tt></font>" : negering av det följande uttrycket

<li>"<font size=+1><tt>|</tt></font>" : logiskt "eller" mellan de två
följande uttrycken

<li>"<font size=+1><tt>&amp;</tt></font>" : logiskt "och" mellan de två
följande uttrycken

</ul>

Exempel:

<ul>

<li> visa texten om det är en sökning efter titel: <font
size=+1><tt>%It...%E</tt></font>

<li> visa texten om vi varken är "wizard" eller "friend": <font
size=+1><tt>%I&amp;NwNf...%E</tt></font>

</ul>

<LI><STRONG>Andra. </LI>

<UL>
</STRONG>
<LI>"<TT>%r</TT>" f&ouml;ljt av ett namn och en ny rad: till&auml;gg till filen "name.txt". </LI>
<LI>"<TT>%b</TT>": v&auml;rdet p&aring; variabeln "body_prop" till filen "foo.gwf" f&ouml;r databasen "foo". </LI>
<LI>"<TT>%h</TT>": variabler beroende p&aring; sammanhanget (se nedan) p&aring; formen "&lt;input type=hidden name=var value=val&gt;". </LI>
<LI>"<TT>%l</TT>": spr&aring;k. </LI>
<LI>"<TT>%n</TT>": antal personer i databasen. </LI>
<LI>"<TT>%u</TT>": person vald som proband för navigering enligt Kekules system. </LI>
<LI>"<TT>%%</TT>": endast ett "%". </LI>
<LI>"<TT>%[</TT>": "[". </LI>
<LI>"<TT>%]</TT>": "]". </LI></UL>
</UL>

<P>En del makros refererar till <STRONG>variabler beroende p&aring; sammanhanget</STRONG>. Dessa &auml;r: </P>

<UL>
<LI>b: i CGI mod, databasens namn. </LI>
<LI>lang: spr&aring;k. </LI>
<LI>iz: nummer för personen vald som proband för navigering enligt Kekules system. </LI></UL>

<P>Det <STRONG>konditionella</STRONG> kan inte &ouml;verlappa: man kan inte s&auml;tta en "<TT>%w... %w</TT>" inuti en "<TT>%i... %i</TT>". </P>
<HR>

<H3><font color=#2f6400><A NAME="Ass">Associerade sidor</A></font></H3>
<P>P&aring; din anpassade v&auml;lkomstsida kan du s&auml;tta in l&auml;nkar till associerade filer som kommer att behandlas av <FONT COLOR=#2f6400><B>GeneWeb</B></FONT> p&aring; samma s&auml;tt: makrona kommer att bli transformerade. </P>
<P>Till exempel, om du vill skapa en speciell sida f&ouml;r en k&auml;nd person fr&aring;n din databas, skapa en fil ben&auml;mnd "famous.txt" i katalogen "bdir/lang/lg" eller i katalogen "bdir/lang" (se f&ouml;rsta delen). </P>
<P>F&ouml;rfr&aring;gningarna till "famous.txt" &auml;r: "m=H;v=famous". P&aring; v&auml;lkomstsidan, skriver du: </P>
<PRE>
   &lt;a href="%sm=H;v=famous"&gt;K&auml;nda&lt;/a&gt; personer i min
   databas.</PRE>
<P>I "famous.txt", kan du l&auml;gga in l&auml;nkar till personer i din databas, oberoende
fr&aring;n deras namn och av sammanhanget, genom att anv&auml;nda makros. </P>
<P>De riktigt intressanta makrona &auml;r: </P>

<UL>
<LI>"<TT>%b</TT>" kan du anv&auml;nda att s&auml;tta in en tag "&lt;body&gt;" genom att
skriva "&lt;body%b&gt;". </LI>
<LI>"<TT>%s</TT>" kan du anv&auml;nda i l&auml;nkar. </LI></UL>

<P>Exempel p&aring; mening i "famous.txt": </P>
<PRE>
   Se min kusin &lt;a href="%sp=louis;n=de+bourbon;oc=5"&gt;
   Ludvig XIV&lt;/a&gt; och min
   &lt;a href="%sem=R;ep=bertil;en=svensson;m=NG;n=louis+xiv;t=PN"&gt;
   v&auml;g till honom.</PRE>
<P>Se ocks&aring; hur du g&ouml;r korrekta <A HREF="links.htm">l&auml;nkar</A> till <FONT COLOR=#2f6400><B>GeneWeb</B></FONT> sidor. </P>
<P>Notera att "avancerad s&ouml;kning" fungerar som en associerad fil ben&auml;mnd "advanced.txt". </P>

<hr>
<H3><font color=#2f6400><A NAME="All">Alla sidor</A></font></H3>
Alla sidor, välkomstsidan inkluderad, kan modifieras på tre ställen:
<ul>
<li> Du kan lägga till en fil benämnd <b>dbas.hed</b> (om "dbas är namnet på din databas),
vilken kommer att sättas in på alla sidornas huvuden (mellan &lt;head&gt; och &lt;/head&gt;). Det tillåter dig, till exempel, att göra "style sheets". Filen ska läggas i katalogen
"lang" och/eller om du vill ha annorlunda utseende för språket "xy", även i
katalogen "lang/xy".
<li> På samma sätt, kan du lägga till en fil benämnd <b>dbas.trl</b>, som kommer
att sättas in på alla sidor efter GeneWeb copyright raden.
<li> Till sist, kan du sätta variabeln <tt>body_prop</tt> i filen <b>dbas.gwf</b>, den
kommer att sättas in i taggen "&lt;body&gt;" på alla sidor. Den är användbar för
att sätta en bakgrundsbild eller för att ändra färgerna på texten. Se denna
<a href="start.htm#Cnf">del</a> av kapitlet "Hur man kommer igång med GeneWeb".
</ul>

<p><hr><br>
<center>Tillbaka till <A HREF="diruse.htm">bruksanvisningen</A></center>

<p><hr><font size=-1><em>Copyright (c) 1998-2006 INRIA - GeneWeb</em></font><br>

</body>
