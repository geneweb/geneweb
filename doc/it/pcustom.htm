<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<head><title>GeneWeb - Personalizzazione delle pagine</title></head>
<body background="../images/gwback.jpg">
<table border=0 width="100%">
<tr>
<td>
<a href="http://pauillac.inria.fr/~ddr/GeneWeb/"><img width=96
height=108 src="../images/gwlogo.png" align=left border=0 alt=GeneWeb></a>
</td>
<td align=left>
<h1><font color=#2f6400>GeneWeb:<br>Personalizzazione delle pagine</font></h1>
</td>
</tr>
</table>
</font>
<br><br>

Questo capitolo indica come personalizzare sia la pagina di benvenuto
sia le altre pagine ed inserire delle pagine associate.
Si indirizza a coloro che hanno gi&agrave; una certa dimestichezza con <font
color=#2f6400><b>GeneWeb</b></font> e che vogliono entrare nei dettagli.

<ul>

<li><a href="#Wel">Pagina di benvenuto</a>

<li> <a href="#Mac">Macro</a>

<li> <a href="#Ass">Pagine associate</a>

<li> Personalizzazione di <a href="#All">tutte le pagine</a>

</ul>

<hr>
<h3><a name="Wel">
</a> <font color=#2f6400> Pagina di benvenuto </font></a></h3>

La pagina di benvenuto &egrave; costituita a partire da files testo, i files "start.txt"
forniti con la distribuzione di <font color=#2f6400><b>GeneWeb</b></font>.
E possibile modificare questi files e/o farne una versione specifica per una determinata base di dati.

<p>

Questi files contengono del codice HTML mescolato a delle "macro"
(vedi paragrafo seguente). Se volete creare dei files simili o modificarli,
non utilizzate un editore HTML, ma un editore di testo normale
(ma non word processor come Word).

<p>

Per costruire la pagina di benvenuto della base "pippo",
<font color=#2f6400><b>GeneWeb</b></font> cerca i files seguenti, nell'ordine:

<ul>

<li>bdir/lang/lg/pippo.txt

<li>hdir/lang/lg/pippo.txt

<li>bdir/lang/pippo.txt

<li>hdir/lang/pippo.txt

<li>bdir/lang/lg/start.txt

<li>hdir/lang/lg/start.txt

<li>bdir/lang/start.txt

<li>hdir/lang/start.txt

</ul>

dove :

<ul>

<li>"bdir" = valore di "-bd" del comando "gwd" (settaggio: directory attualmente utilizzata).

<li>"hdir" = valore di "-hd" del comando "gwd" (settaggio: directory attualmente utilizzata).

<li>"lg" = lingua attualmente utilizzata.

</ul>

<p>

I files "hdir/lang/lg/start.txt" sono forniti col programma.
Per fabbricarvi un file personalizzato, la cosa pi&ugrave; semplice da fare
&egrave; di partire dalla copia di un file "start.txt" che modificherete secondo
i vostri desideri. Se la presentazione dei files "start.txt" non vi piace, potere cambiarli direttamente.

<p>

Attenzione: da una versione di <font color=#2f6400><b>GeneWeb</b></font>
all'altra, i files "start.txt" possono essere migliorati. Se utilizzate
una nuova versione e volete approfittare dei miglioramenti, controllate se i
files "start.txt" sono stati modificati e inserite le modifiche nei vostri files personali.

<hr>
<h3><a name="Mac">
</a> <font color=#2f6400>Macro</font></a></h3>

Come detto sopra, i file delle pagine di benvenuto non sono in
HTML puro. Contengono delle "macro". Si tratta di
sequenze che iniziano col carattere "%" seguito da una lettera.
Ad esempio: "%s", "%x", ecc.

<p>

Queste macro vengono sostituite con dei valori che dipendono dal contesto:
nome della base, lingua, numero di persone nella base, ecc.

<p>

Esiste anche un trattameno particolare per le parentesi
"[" e "]": se c'&egrave; del testo tra le parentesi,
viene tradotto nella lingua utilizzata a partire dal lessico (file "lexicon.txt")
con le seguenti modifiche:

<ul>

<li>Se c'&egrave; un asterisco dopo una parentesi aperta,
il primo carattere della traduzione viene trasformato in maiuscola.

<li>Se la parentesi chiusa &egrave; seguita da un numero,
questo corrisponde alla ennesima voce della traduzione
(cominciando da 0), le voci sono separate da "/". Se questa voce non esiste,
&egrave; la prima che viene utilizzata.

</ul>

<p>

Per capire come vengono utilizzate le macro,
la cosa migliore da fare &egrave; di leggere i files "start.txt" forniti col programma.

<p>

Ecco il significato delle macro "%":

<ul>

<li><strong>Base.</strong><br>

<ul>

<li>"<font size=+1><tt>%t</tt></font>" : nome della base.

<li>"<font size=+1><tt>%f</tt></font>" : in modo server, nome della base,
seguito da una eventuale password (esempio: "pippo_xyzzx");
in modo CGI, il nome del comando CGI (esempio: "gd.exe").

<li>"<font size=+1><tt>%g</tt></font>" : in modo server, come "%f"; in modo CGI,
il nome del comando CGI seguito da "?b=", dal
nome della base e da un punto e virgola. Esempio: "pippo?lang=it;iz=8233;".

<li>"<font size=+1><tt>%s</tt></font>" : valore di "%f" seguito da un
punto interrogativo e da variabili contestuali (vedi sotto)
seguite da un punto e virgola. Esempio: "pippo?lang=it;iz=8233;".

</ul>

<li><strong>Account.</strong><br>

<ul>

<li>"<font size=+1><tt>%c</tt></font>" : numero di accessi alla
pagina di benvenuto.

<li>"<font size=+1><tt>%q</tt></font>" : numero di richieste.

<li>"<font size=+1><tt>%d</tt></font>" : data della prima consultazione.

</ul>

<li><strong>Condizionali.</strong><br>
I condizionali cominciano con  "<font size=+1><tt>%I</tt></font>
seguito da un'espressione booleana (vero o falso) e finiscono con "<font size=+1><tt>%E</tt></font>".
Il testo compreso tra queste due macro viene visualizzato se e solo
se l'espressione booleana &egrave; vera. Un'espressione booleana &egrave; :

<ul>

<li>"<font size=+1><tt>f</tt></font>" : si &egrave; "amici"

<li>"<font size=+1><tt>w</tt></font>" : si &egrave; "wizard"

<li>"<font size=+1><tt>j</tt></font>" : si &egrave; "wizard" e "amici"
(cf <a href="start.htm#Cnf">file a.gwf</a>, "wizard_just_friend")

<li>"<font size=+1><tt>c</tt></font>" : si &egrave; in modo cgi

<li>"<font size=+1><tt>h</tt></font>" : esiste un file giornale

<li>"<font size=+1><tt>l</tt></font>" : il navigatore non tratta le tables

<li>"<font size=+1><tt>n</tt></font>" : esistono delle note per la base di dati

<li>"<font size=+1><tt>t</tt></font>" : esiste una ricerca per titolo nobiliare

<li>"<font size=+1><tt>z</tt></font>" : esiste una persona presa come
riferimento Sosa (vedi macro "<font
size=+1><tt>%u</tt></font>")

<li>"<font size=+1><tt>a</tt></font>" : esiste una <a
href="access.htm#DBA">restrizione globale d'accesso</a> alla
base di dati

<li>"<font size=+1><tt>N</tt></font>" : contrario dell'espressione che segue

<li>"<font size=+1><tt>|</tt></font>" : "o" logico tra le due
espressioni che seguono

<li>"<font size=+1><tt>&amp;</tt></font>" : "e" logico tra le due
espressioni che seguono

</ul>

Esempi:

<ul>

<li> visualizzare il testo se &egrave; in atto una ticerca per Titolo: <font
size=+1><tt>%It...%E</tt></font>

<li> visualizzare il testo se non si &egrave; n&eacute; "wizard" n&eacute; "amico": <font
size=+1><tt>%I&amp;NwNf...%E</tt></font>

</ul>

<li><strong>Altri.</strong><br>

<ul>

<li>"<font size=+1><tt>%r</tt></font>" seguito da un nome e da Return : inclusione del file "nome.txt".

<li>"<font size=+1><tt>%b</tt></font>" : valore della variabile
"body_prop" del file "pippo.gwf" per la base "pippo".

<li>"<font size=+1><tt>%h</tt></font>" : variabili contestuali (vedi
sotto) nella forma "&lt;input type=hidden name=var
value=val&gt".

<li>"<font size=+1><tt>%l</tt></font>" : lingua.

<li>"<font size=+1><tt>%n</tt></font>" : numero di persone della
base.

<li>"<font size=+1><tt>%u</tt></font>" : persona presa come
riferimento Sosa.

<li>"<font size=+1><tt>%%</tt></font>" : un solo "%".

<li>"<font size=+1><tt>%[</tt></font>" : un "[".

<li>"<font size=+1><tt>%]</tt></font>" : un "]".

</ul>

</ul>

<p>

Certe macro fanno riferimento a delle
<strong>variabili contestuali</strong>. Si tratta di:

<ul>

<li>b : in modo CGI, nome della base.

<li>lang : lingua.

<li>iz : numero dell'eventuale persona presa come
riferimento Sosa.

</ul>

<p>

<hr>
<h3><a name="Ass">
</a> <font color=#2f6400> Pagine associate </font></a></h3>

Nella vostra pagina di benvenuto personalizzata, potete mettere dei links verso dei files associati
che saranno trattati nello stesso modo da <font color=#2f6400><b>GeneWeb</b></font>:
le macro vi saranno trasformate.

<p>

Ad esempio, se volete inserire una pagina speciale sulle persone
celebri della vostra base, generate un file che chiamerete
"celebrit&agrave;.txt" e che metterete nella directory
"bdir/lang/lg" o nella directory "bdir/lang" (vedi il primo paragrafo).

<p>

La richiesta d'accesso a "celebrit&agrave;.txt" si scrive: "m=H;v=celebrit&agrave;". Nella pagina di benvenuto metterete :

<pre>
Le persone <a href="%sm=H;v=celebrità">celebri</a>
della mia base.
</pre>

<p>

In "celebrit&agrave;.txt", potrete mettere dei links verso delle
persone della vostra base, indipendentemente dal suo nome e
dal contesto, utilizzando le buone macro.

<p>

Le macro particolarmente interessanti sono:

<ul>

<li>"<font size=+1><tt>%b</tt></font>" che potrete mettere nel
tag "&lt;body&gt;" scrivendo "&lt;body%b&gt;".

<li>"<font size=+1><tt>%s</tt></font>" che potrete mettere nei
links.

</ul>

Esempio di frase in "celebrit&agrave;.txt":

<pre>
   Vedi mio cugino &lt;a href="%sp=louis;n=de+bourbon;oc=5"&gt;
   Louis XIV&lt;/a&gt; e i miei
   &lt;a href="%sem=R;ep=jean;en=dupont;m=NG;n=louis+xiv;t=PN"&gt;
   legami di parentela&lt;/a&gt; con lui.
</pre>

<p>

Date un'occhiata anche a come stabilire dei <a
href="links.htm">links</a> verso delle pagine di <font color=#2f6400><b>GeneWeb</b></font>.

<p>

Notate che la "richiesta evoluta" funziona come un file associato, col nome di "advanced.txt"

<p>

<hr>
<h3><a name="All">
</a> <font color=#2f6400>Tutte le pagine</font></a></h3>

Le pagine, compresa la pagina di benvenuto, possono essere personalizzate in tre punti:

<ul>

<li>Potete aggiungere un file chiamato <b>base.hed</b> (se "base" &egrave; il nome della vostra base di dati)
che sar&agrave; inserito in tutte le testate di pagine (tra &lt;head&gt; et &lt;/head&gt;).
Permette di inserire delle style sheets, ad esempio. Va messo nella directory "lang" e/o,
se volete che sia diverso per la lingua "xy" nella directory "lang/xy".

<p>

<li>Allo stesso modo, potete aggiungere un file chiamato <b>base.trl</b>
che sar&agrave; inserito dietro il copyright di GeneWeb ad ogni pagina.

<li>Infine, avete la possibilit&agrave; di posizionare la variabile <tt>body_prop</tt>
del vostro file <b>base.gwf</b> che sarà inserito in "&lt;body&gt;" ad ogni pagina.
Utile per mettere un colore o un motivo di fondo
o per cambiare i colori dei testi visualizzati. Vedi questo <a
href="start.htm#Cnf">paragrafo</a> del capitolo "come iniziare con GeneWeb".

</ul>

<p>
<hr>
<br>
<center>Ritorna a <a href="diruse.htm">Istruzioni per l'uso</a></center>

<p><hr><font size=-1><em>Copyright (c) 1998-2005 INRIA -
GeneWeb</em></font><br>
</body>
