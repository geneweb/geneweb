<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mutil (geneweb.Mutil)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.3.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">geneweb</a> &#x00BB; Mutil</nav><header class="odoc-preamble"><h1>Module <code><span>Mutil</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-verbose"><a href="#val-verbose" class="anchor"></a><code><span><span class="keyword">val</span> verbose : <span>bool <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>Global variable that indicates either servers should be in verbose mode.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_iter_first"><a href="#val-list_iter_first" class="anchor"></a><code><span><span class="keyword">val</span> list_iter_first : <span><span>(<span>bool <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>list_iter_first f l</code> iter over first element with <code>f true</code> and over others with <code>f false</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-strip_all_trailing_spaces"><a href="#val-strip_all_trailing_spaces" class="anchor"></a><code><span><span class="keyword">val</span> strip_all_trailing_spaces : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Remove all trailing spaces in string</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decline"><a href="#val-decline" class="anchor"></a><code><span><span class="keyword">val</span> decline : <span>char <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nominative"><a href="#val-nominative" class="anchor"></a><code><span><span class="keyword">val</span> nominative : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Encodes name for nominative declination format.</p><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> </li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkdir_p"><a href="#val-mkdir_p" class="anchor"></a><code><span><span class="keyword">val</span> mkdir_p : <span><span class="optlabel">?perm</span>:int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>mkdir_p ?perm dir</code> Create the directory <code>dir</code>. No error if existing, make parent directories as needed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_dir"><a href="#val-remove_dir" class="anchor"></a><code><span><span class="keyword">val</span> remove_dir : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Remove every file in the directory and then remove the directory itself</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lock_file"><a href="#val-lock_file" class="anchor"></a><code><span><span class="keyword">val</span> lock_file : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the name of a lock file (with extension .lck). Result is generally used as an argument for <code>Lock.control</code> function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-initial"><a href="#val-initial" class="anchor"></a><code><span><span class="keyword">val</span> initial : <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Returns position of first capital letter in the name (0 if no capitals).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-input_particles"><a href="#val-input_particles" class="anchor"></a><code><span><span class="keyword">val</span> input_particles : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>input_particles fname</code> read file and returns list of lines. Empty lines are skipped.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-surnames_pieces"><a href="#val-surnames_pieces" class="anchor"></a><code><span><span class="keyword">val</span> surnames_pieces : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Divide surnames on pieces. Every separated word that contains at least 4 character forms one piece. Words that contains less than 4 characters or words &quot;saint&quot; and &quot;sainte&quot; are considered as the particles and are attached to the another word to form a piece. If string contains less than two pieces, returns an empty list.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-utf_8_of_iso_8859_1"><a href="#val-utf_8_of_iso_8859_1" class="anchor"></a><code><span><span class="keyword">val</span> utf_8_of_iso_8859_1 : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Convert encoded string with ISO 8859-1 to UTF 8</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iso_8859_1_of_utf_8"><a href="#val-iso_8859_1_of_utf_8" class="anchor"></a><code><span><span class="keyword">val</span> iso_8859_1_of_utf_8 : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Convert encoded string with UTF 8 to ISO 8859-1</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-roman_of_arabian"><a href="#val-roman_of_arabian" class="anchor"></a><code><span><span class="keyword">val</span> roman_of_arabian : <span>int <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Convert arabic number (int) to roman (string). Number should be &lt; 4000.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-arabian_of_roman"><a href="#val-arabian_of_roman" class="anchor"></a><code><span><span class="keyword">val</span> arabian_of_roman : <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Convert roman number (string) to arabic (int). Number should be less or equal to MMMCMXCIX (3999).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-input_lexicon"><a href="#val-input_lexicon" class="anchor"></a><code><span><span class="keyword">val</span> input_lexicon : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string, string)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.in_channel)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>input_lexicon lang ht open_file</code> open <i>lexicon.txt</i> file with <code>open_file ()</code>, parse it and fill <code>ht</code> where key is the keyword and value is a coresponding traduction associated to a <code>lang</code> language code. If traduction line has a form <code>-&gt;: kw</code> it associates to the current section name the value associated to <code>kw</code> section name inside <code>ht</code> (keyword alias).</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-StrSet"><a href="#module-StrSet" class="anchor"></a><code><span><span class="keyword">module</span> StrSet</span><span> : <span class="xref-unresolved">Stdlib</span>.Set.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">elt</span> = <span class="xref-unresolved">string</span></span></span></code></div><div class="spec-doc"><p>Set of strings</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tr"><a href="#val-tr" class="anchor"></a><code><span><span class="keyword">val</span> tr : <span>char <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>tr c1 c2 str</code> Return a new string which is the same as <code>str</code> with all occurences of <code>c1</code> replaced by <code>c2</code>. If <code>str</code> does not contain <code>c1</code> <code>str</code> is returned untouched.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unsafe_tr"><a href="#val-unsafe_tr" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_tr : <span>char <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>unsafe_tr c1 c2 str</code> Update <code>str</code> in place. Replace all occurences of <code>c1</code> by <code>c2</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array_to_list_map"><a href="#val-array_to_list_map" class="anchor"></a><code><span><span class="keyword">val</span> array_to_list_map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span></span></code></div><div class="spec-doc"><p><code>array_to_list_map fn a</code> is almost like <code>Array.to_list a |&gt; List.map fn</code> but is more efficient.</p><p>The list is constructed backward, so if <code>fn</code> have side effects it may not behave as excepted.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array_to_list_rev_map"><a href="#val-array_to_list_rev_map" class="anchor"></a><code><span><span class="keyword">val</span> array_to_list_rev_map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span></span></code></div><div class="spec-doc"><p><code>array_to_list_revmap fn a</code> is almost like <code>Array.to_list a |&gt; List.rev_map fn</code> but is more efficient.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array_assoc"><a href="#val-array_assoc" class="anchor"></a><code><span><span class="keyword">val</span> array_assoc : <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'k</span> * <span class="type-var">'v</span>)</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v</span></span></code></div><div class="spec-doc"><p><code>array_assoc k arr</code> returns the value associated with key <code>k</code> in the array of pairs <code>arr</code>. That is, <code>array_assoc k [| ... ; (k,v) ; ... |] = v</code> if <code>(k,v)</code> is the leftmost binding of a in array <code>arr</code>. Raise <code>Not_found</code> if there is no value associated with <code>k</code> in <code>arr</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-start_with"><a href="#val-start_with" class="anchor"></a><code><span><span class="keyword">val</span> start_with : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>start_with prefix off str</code> Test if <code>str</code> starts with <code>prefix</code> (at offset <code>off</code>).</p><p>Raise <code>Invalid_argument</code> if <code>off</code> is not a valid index in <code>str</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-start_with_wildcard"><a href="#val-start_with_wildcard" class="anchor"></a><code><span><span class="keyword">val</span> start_with_wildcard : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>start_with_wildcard prefix off str</code> Test if <code>str</code> starts with <code>prefix</code> (at offset <code>off</code>). Occurences of <code>'_'</code> in <code>prefix</code> will match both <code>'_'</code> and <code>' '</code> in <code>str</code> and trailing <code>'_'</code> of <code>prefix</code> is treated as an optional <code>'_'</code> <code>' '</code>.</p><p>Raise <code>Invalid_argument</code> if <code>off</code> is not a valid index in <code>str</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-contains"><a href="#val-contains" class="anchor"></a><code><span><span class="keyword">val</span> contains : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>contains str sub</code> Test <code>sub</code> is contained in <code>str</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compile_particles"><a href="#val-compile_particles" class="anchor"></a><code><span><span class="keyword">val</span> compile_particles : <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Re</span>.re</span></code></div><div class="spec-doc"><p><code>compile_particles list</code> Compile <code>list</code> so it can be used with <code>get_particle</code> or <code>compare_after_particle</code> function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_particle"><a href="#val-get_particle" class="anchor"></a><code><span><span class="keyword">val</span> get_particle : <span><span class="xref-unresolved">Re</span>.re <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>get_particle particles name</code> Return <code>p</code> where <code>p</code> is in <code>particles</code> and is prefix of <code>name</code>. If no such <code>p</code> exists, empty string <code>&quot;&quot;</code> is returned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare_after_particle"><a href="#val-compare_after_particle" class="anchor"></a><code><span><span class="keyword">val</span> compare_after_particle : <span><span class="xref-unresolved">Re</span>.re <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>compare_after_particle particles s1 s2</code> compare strings <code>s1</code> <code>s2</code> starting from the first character after particle's match. If they are equal, compare particles.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rm"><a href="#val-rm" class="anchor"></a><code><span><span class="keyword">val</span> rm : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>rm fname</code> Remove <code>fname</code>. If <code>fname</code> does not exists, do nothing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mv"><a href="#val-mv" class="anchor"></a><code><span><span class="keyword">val</span> mv : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>mv src dst</code> Move <code>src</code> to <code>dst</code>. If <code>src</code> does not exists, do nothing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_int_sep"><a href="#val-string_of_int_sep" class="anchor"></a><code><span><span class="keyword">val</span> string_of_int_sep : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>string_of_int_sep &quot;,&quot; 1000000</code> is <code>&quot;1,000,000&quot;</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_compare"><a href="#val-list_compare" class="anchor"></a><code><span><span class="keyword">val</span> list_compare : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>list_compare cmp l1 l2</code> Comparison function for lists, using <code>cmp</code> to compare each elements</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_find_map"><a href="#val-list_find_map" class="anchor"></a><code><span><span class="keyword">val</span> list_find_map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span></span></code></div><div class="spec-doc"><p><code>list_find_map fn list</code> OCaml Stdlib's <code>List.find_map</code> (introduced in 4.10.0) backported into GeneWeb</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array_find_map"><a href="#val-array_find_map" class="anchor"></a><code><span><span class="keyword">val</span> array_find_map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span></span></code></div><div class="spec-doc"><p><code>array_find_map f a</code> applies <code>f</code> to the elements of <code>a</code> in order, and returns the first result of the form <code>Some v</code>, or <code>None</code> if none exist. TODO OCaml 4.13; use Stdlib</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_rev_iter"><a href="#val-list_rev_iter" class="anchor"></a><code><span><span class="keyword">val</span> list_rev_iter : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>list_rev_iter f l</code> gives the same result as <code>List.rev l |&gt; List.iter fn</code>, but without creating intermediate list (not tail-recursive).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_last"><a href="#val-list_last" class="anchor"></a><code><span><span class="keyword">val</span> list_last : <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>list_last list</code> Return the last element of the list. Raises <code>Failure</code> if the list is empty.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_slice"><a href="#val-list_slice" class="anchor"></a><code><span><span class="keyword">val</span> list_slice : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> list</span></span></code></div><div class="spec-doc"><p><code>list_slice from_ to_ list</code> Extracts elements from <code>a</code>-nth (starts with zero, inclusive) to <code>b</code>-nth (exclusive). If <code>list</code> is not long enough, result will be shorter than requested, but the function will not fail.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_magic"><a href="#val-check_magic" class="anchor"></a><code><span><span class="keyword">val</span> check_magic : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.in_channel <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>check_magic magic ic</code> Read (and consume) the <code>magic</code> string at the beggining of <code>ic</code> and return <code>true</code>. If <code>ic</code> does not start with <code>magic</code>, reset the reading position of <code>ic</code> to where is was before you call <code>check_magic</code> and return <code>false</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-executable_magic"><a href="#val-executable_magic" class="anchor"></a><code><span><span class="keyword">val</span> executable_magic : string</span></code></div><div class="spec-doc"><p>Magic string are either get from <i>GW_EXECUTABLE_MAGIC</i> environement variable either generated from the md5sum of the running executable. It can be used for volatile files which can be easily corrupted by any change in program or data representation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-random_magic"><a href="#val-random_magic" class="anchor"></a><code><span><span class="keyword">val</span> random_magic : string</span></code></div><div class="spec-doc"><p>Magic string generated from 30 random bits. It should be different each time you launch the program.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array_except"><a href="#val-array_except" class="anchor"></a><code><span><span class="keyword">val</span> array_except : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> array</span></span></code></div><div class="spec-doc"><p><code>array_except value array</code> Return a new array containing all the elements from <code>array</code> except the first occurence of <code>value</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_particles"><a href="#val-default_particles" class="anchor"></a><code><span><span class="keyword">val</span> default_particles : <span>string list</span></span></code></div><div class="spec-doc"><p>List of default particles used in GeneWeb</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array_forall2"><a href="#val-array_forall2" class="anchor"></a><code><span><span class="keyword">val</span> array_forall2 : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> array</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>array_forall2 p a b</code> Checks if all elements of the arrays satisfy the predicate <code>p</code>. That is, it returns <code>(p a1 b1) &amp;&amp; (p a2 b2) &amp;&amp; ... &amp;&amp; (p an bn)</code>. Raise Invalid_argument if the two lists are determined to have different lengths.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_replace"><a href="#val-list_replace" class="anchor"></a><code><span><span class="keyword">val</span> list_replace : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> list</span></span></code></div><div class="spec-doc"><p><code>list_replace old_v new_v list</code> Return the same list as <code>list</code> were the first occurence of <code>old_v</code> has been replaced by <code>new_v</code>. If <code>old_v</code> is unbound, the list is returned unchanged.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_except"><a href="#val-list_except" class="anchor"></a><code><span><span class="keyword">val</span> list_except : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> list</span></span></code></div><div class="spec-doc"><p><code>list_except x list</code> Return a list containing all the elements from <code>list</code> except the first occurence of <code>x</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_index"><a href="#val-list_index" class="anchor"></a><code><span><span class="keyword">val</span> list_index : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>list_index element list</code> Finds the index of <code>element</code> in list. Raises <code>Not_found</code> if it does not exists.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_ref_append"><a href="#val-list_ref_append" class="anchor"></a><code><span><span class="keyword">val</span> list_ref_append : <span><span><span><span class="type-var">'a</span> list</span> <span class="xref-unresolved">Stdlib</span>.ref</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>list_ref_append tl hd</code> Add <code>hd</code> at the beginning of <code>tl</code> ref.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-input_file_ic"><a href="#val-input_file_ic" class="anchor"></a><code><span><span class="keyword">val</span> input_file_ic : <span><span class="xref-unresolved">Stdlib</span>.in_channel <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Read the content of a file. Starts from the position where it is when calling <code>input_file_ic</code>, and read until the end of the file.</p><p>This function avoid crashes with text files on Windows platform.</p><p>If the channel is opened on a file that is not a regular file, the result is meaningless.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-normalize_utf_8"><a href="#val-normalize_utf_8" class="anchor"></a><code><span><span class="keyword">val</span> normalize_utf_8 : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>normalize_utf_8 s</code> Return <code>s</code> normalized using <a href="http://www.unicode.org/glossary/#normalization_form_c">NFC</a> with all malformed UTF-8 character replaced by <a href="http://unicode.org/glossary/#replacement_character">the replacement character</a></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_map_sort_uniq"><a href="#val-list_map_sort_uniq" class="anchor"></a><code><span><span class="keyword">val</span> list_map_sort_uniq : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span></span></code></div><div class="spec-doc"><p><code>list_map_sort_uniq f l</code> apply <code>f</code> to every element and return sorted with Merge Sort algorithm list where every element is unique.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_rev_map_append"><a href="#val-list_rev_map_append" class="anchor"></a><code><span><span class="keyword">val</span> list_rev_map_append : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span></span></code></div><div class="spec-doc"><p><code>list_rev_map_append f l1 l2</code> apply <code>f</code> to every element in <code>l1</code>, reverse it and concat with <code>l2</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_or_create_channel"><a href="#val-read_or_create_channel" class="anchor"></a><code><span><span class="keyword">val</span> read_or_create_channel : 
  <span><span class="optlabel">?magic</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.in_channel <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.out_channel <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>read_or_create_channel ?magic fname read write</code></p><p>If <code>fname</code> exists (and starts with <code>magic</code> if this one is provided), <code>read</code> function is used on the file. If it does not, or does not start with <code>magic</code>, or if <code>read</code> raise an exception, <code>write</code> function is used on the file.</p><p>This function takes care of locking and closing files so you must not take care of that in <code>read</code>/<code>write</code>. It also takes care of writing <code>magic</code> at the beginning of the file before calling <code>write</code></p><p>On Windows, file is not locked.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_or_create_value"><a href="#val-read_or_create_value" class="anchor"></a><code><span><span class="keyword">val</span> read_or_create_value : 
  <span><span class="optlabel">?magic</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>read_or_create_value ?magic fname create</code></p><p>If <code>fname</code> exists (and starts and ends with <code>magic</code> if this one is provided), return the unmarshalled value. If it does not, or does not start with <code>magic</code>, or if unmarshalling raise an exception, <code>create</code> function is used to produce the value to be marshalled.</p><p>On Windows, file is not locked.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bench"><a href="#val-bench" class="anchor"></a><code><span><span class="keyword">val</span> bench : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>bench name fn</code> Execute <code>fn</code>, print stats about time and memory allocation, return <code>fn</code> result.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_callstack"><a href="#val-print_callstack" class="anchor"></a><code><span><span class="keyword">val</span> print_callstack : <span><span class="optlabel">?max</span>:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Prints call stack on stderr with at most <code>max</code> entries.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encode"><a href="#val-encode" class="anchor"></a><code><span><span class="keyword">val</span> encode : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../Adef/index.html#type-encoded_string">Adef.encoded_string</a></span></code></div><div class="spec-doc"><p><code>encode s</code> Encodes the string <code>s</code> in another string where spaces and special characters are coded. This allows to put such strings in html links &lt;a href=...&gt;. This is the same encoding done by Web browsers in forms.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decode"><a href="#val-decode" class="anchor"></a><code><span><span class="keyword">val</span> decode : <span><a href="../Adef/index.html#type-encoded_string">Adef.encoded_string</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>decode s</code> Does the inverse job than <code>code</code>, restoring the initial string. The heading and trailing spaces are stripped.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-gen_decode"><a href="#val-gen_decode" class="anchor"></a><code><span><span class="keyword">val</span> gen_decode : <span>bool <span class="arrow">&#45;&gt;</span></span> <span><a href="../Adef/index.html#type-encoded_string">Adef.encoded_string</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Like above but heading and trailing spaces are stripped only if bool parameter is <code>true</code>. <code>decode</code> = <code>gen_decode true</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_param"><a href="#val-extract_param" class="anchor"></a><code><span><span class="keyword">val</span> extract_param : <span>string <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>extract_param name stopc request</code> can be used to extract some parameter from a browser <code>request</code> (list of strings); <code>name</code> is a string which should match the beginning of a request line, <code>stopc</code> is a character ending the request line. For example, the string request has been obtained by: <code>extract_param &quot;GET /&quot; ' '</code>. Answers the empty string if the parameter is not found.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sprintf_date"><a href="#val-sprintf_date" class="anchor"></a><code><span><span class="keyword">val</span> sprintf_date : <span><span class="xref-unresolved">Unix</span>.tm <span class="arrow">&#45;&gt;</span></span> <a href="../Adef/index.html#type-safe_string">Adef.safe_string</a></span></code></div><div class="spec-doc"><p>Print a date using &quot;%04d-%02d-%02d %02d:%02d:%02d&quot; format Example : 2021-12-13 22:35:08.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rev_input_line"><a href="#val-rev_input_line" class="anchor"></a><code><span><span class="keyword">val</span> rev_input_line : 
  <span><span class="xref-unresolved">Stdlib</span>.in_channel <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>bytes <span class="xref-unresolved">Stdlib</span>.ref</span> * <span>int <span class="xref-unresolved">Stdlib</span>.ref</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  string * int</span></code></div><div class="spec-doc"><p><code>rev_input_line ic pos (rbytes, rpos)</code> Read characters in reverse order from the given input channel, until a newline character is encountered. Return the string of all characters read, without the newline character at the end, and the position of the first character of the returned line (to be used with next <code>rev_input_line</code> call).</p><p><code>rpos</code> and <code>rbytes</code> are intermediate between <code>ic</code> and reading functions. At the beginig when <code>!rpos = 0</code> and <code>rbytes</code> is empty, initialise buffer with the size = 1024, then reads last 1024 characters from <code>ci</code>. When <code>rpos</code> comes down to 0, resize buffer *2 and reads 2048 characters before 1024 last characters. <code>rpos</code> and <code>rbytes</code> must be the same in each subsequents calls</p><p>Raises <code>End_of_file</code> if the beginning of the file is reached at the beginning of line.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-search_file_opt"><a href="#val-search_file_opt" class="anchor"></a><code><span><span class="keyword">val</span> search_file_opt : <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p><code>search_file directories file</code> Search for a <code>file</code> in different <code>directories</code> and return then first result or <code>None</code> if not found</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-search_asset_opt"><a href="#val-search_asset_opt" class="anchor"></a><code><span><span class="keyword">val</span> search_asset_opt : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p><code>search_asset fname</code> Searches for a file in assets directories. i.e. directories previously registered with <code>Secure.add_assets</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-eq_key"><a href="#val-eq_key" class="anchor"></a><code><span><span class="keyword">val</span> eq_key : <span><span>(string * string * int)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(string * string * int)</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>eq_key (fn1, sn1, oc1) (fn2, sn2, oc2)</code> Tests if two persons would have the same key</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ls_r"><a href="#val-ls_r" class="anchor"></a><code><span><span class="keyword">val</span> ls_r : <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>ls_r dirs</code> List directories (and subdirectories) contents of <code>dirs</code>, including <code>dirs</code> themselves.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rm_rf"><a href="#val-rm_rf" class="anchor"></a><code><span><span class="keyword">val</span> rm_rf : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>rm_rf dir</code> Remove directory <code>dir</code> and everything inside <code>dir</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><code><span><span class="keyword">val</span> filter_map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span></span></code></div><div class="spec-doc"><p><code>filter_map fn list</code> is a combination of map and filter. Not tail-recursive.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rev_iter"><a href="#val-rev_iter" class="anchor"></a><code><span><span class="keyword">val</span> rev_iter : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>rev_iter fn list</code> is like <code>List.iter fn (List.rev list)</code>. Not tail-recursive.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-groupby"><a href="#val-groupby" class="anchor"></a><code><span><span class="keyword">val</span> groupby : 
  <span><span class="label">key</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'k</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">value</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'k</span> * <span><span class="type-var">'v</span> list</span>)</span> list</span></span></code></div><div class="spec-doc"><p><code>groupby ~key ~value list</code> Group the elements returning the same key together. Ordering of elements is unspecified.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-digest"><a href="#val-digest" class="anchor"></a><code><span><span class="keyword">val</span> digest : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>digest s</code> Returns the (128 bits long, using MD5 algorithm) digest of <code>s</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty_person"><a href="#val-empty_person" class="anchor"></a><code><span><span class="keyword">val</span> empty_person : <span><span class="type-var">'string</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'string</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <span class="type-var">_</span>, <span class="type-var">'string</span>)</span> <a href="../Def/index.html#type-gen_person">Def.gen_person</a></span></span></code></div><div class="spec-doc"><p><code>empty_person empty quest</code> returns a Def.gen_person with <code>first_name</code> and <code>surname</code> initialized to <code>quest</code>, other 'string field initialized to <code>empty</code>, and only empty arrays/lists.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty_family"><a href="#val-empty_family" class="anchor"></a><code><span><span class="keyword">val</span> empty_family : <span><span class="type-var">'string</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">_</span>, unit, <span class="type-var">'string</span>)</span> <a href="../Def/index.html#type-gen_family">Def.gen_family</a></span></span></code></div><div class="spec-doc"><p><code>empty_family empty</code> returns a Def.gen_person with string field initialized initialized with <code>empty</code> and only empty arrays/lists.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-good_name"><a href="#val-good_name" class="anchor"></a><code><span><span class="keyword">val</span> good_name : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>test the base name fir accepted characters: a..z, A..Z, -</p></div></div></div></body></html>
