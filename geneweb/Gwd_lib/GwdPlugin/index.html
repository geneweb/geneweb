<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>GwdPlugin (geneweb.Gwd_lib.GwdPlugin)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">geneweb</a> &#x00BB; <a href="../index.html">Gwd_lib</a> &#x00BB; GwdPlugin</nav><header class="odoc-preamble"><h1>Module <code><span>Gwd_lib.GwdPlugin</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-assets"><a href="#val-assets" class="anchor"></a><code><span><span class="keyword">val</span> assets : <span>string <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>When dynamically loading a plugin, this variable contains the path of the assets directory associated to the plugin being currently loaded.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register"><a href="#val-register" class="anchor"></a><code><span><span class="keyword">val</span> register : 
  <span>ns:string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string * <span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Geneweb/Config/index.html#type-config">Geneweb.Config.config</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> bool)</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>register ~ns handlers</code> register modes handlers of a plugin.</p><p><code>ns</code> is the namespace of the plugin (i.e. its name)</p><p><code>handler</code> is a associative list of handler. The key is the mode (the `m` GET/POST parameter). The value is the handler itself. The difference between a plugin handler and default gwd's handlers (the ones in request.ml) is that a plugin handler takes an extra (first) argument being the path of the asset directory associated to this plugin and returns a boolean.</p><p>If the handler returns <code>true</code>, it means that it actually processed the request. If is is <code>false</code>, <code>gwd</code> must try another plugin handler to treat the request. If no plugin is suitable, gwd's default handler must be used, or fail if it does not exists.</p><p>Handlers can overwrite pre-existing modes or create new ones.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ht"><a href="#val-ht" class="anchor"></a><code><span><span class="keyword">val</span> ht : 
  <span><span>(string, string * <span>(<span><a href="../../Geneweb/Config/index.html#type-config">Geneweb.Config.config</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> bool)</span>)</span>
    <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span></span></code></div><div class="spec-doc"><p>Table of handlers registered by plugins.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register_se"><a href="#val-register_se" class="anchor"></a><code><span><span class="keyword">val</span> register_se : 
  <span>ns:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Geneweb/Config/index.html#type-config">Geneweb.Config.config</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>register_se ~ns hook</code> register a plugin hook (side effect function).</p><p>If enabled, hooks are executed before the request handlers, in the order of registration (first registred = first executed).</p><p>For exemple, a plugin could be to change the <code>conf</code> output to print everything in a buffer and apply a transformation to the resulting document before actually sending it to the client.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-se"><a href="#val-se" class="anchor"></a><code><span><span class="keyword">val</span> se : 
  <span><span><span>(string * <span>(<span><a href="../../Geneweb/Config/index.html#type-config">Geneweb.Config.config</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> unit)</span>)</span> list</span> <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>Table of hooks registered by plugins.</p></div></div></div></body></html>