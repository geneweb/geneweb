# $Id: Makefile.Mac,v 1.3 2000-04-16 15:43:50 ddr Exp $

CAMLP4_COMM = ::tools:camlp4_comm.mpw pa_ifdef.cmo pa_ru.cmo
CAMLP4F = -DMAC
CAMLP4D = `camlp4 -where`
LIBUNIX = -cclib -lunix
OCAMLC = ocamlc
OCAMLI =
OCAMLD =
RM = delete -y

all ÄÄ

clean ÄÄ
    {RM} Å.out Å.opt Å.cm[oixa] Å.cmxa Å.pp[oi] Å.o Å.a Å.obj Å.lib Å.lck Å.bak Å~ .#Å

.cmi Ä .mli
    {CAMLP4_COMM} {CAMLP4F} {default}.mli -o {default}.ppi
    {OCAMLC} {OCAMLI} -I {CAMLP4D} -c -intf {default}.ppi
    {RM} {default}.ppi

.cmo Ä .ml
    {CAMLP4_COMM} {CAMLP4F} {default}.ml -o {default}.ppo
    {OCAMLC} {OCAMLI} {OCAMLD} -I {CAMLP4D} -c -impl {default}.ppo
    {RM} {default}.ppo

OCAMLI= -I ::wserver
GWC_OBJS = argl.cmo mhashtbl.cmo lock.cmo adef.cmo iovalue.cmo name.cmo gutil.cmo btree.cmo buff.cmo iobase.cmo check.cmo pqueue.cmo consang.cmo consangAll.cmo calendar.cmo gwcomp.cmo gwc.cmo
CONSANG_OBJS = argl.cmo mhashtbl.cmo lock.cmo adef.cmo iovalue.cmo name.cmo gutil.cmo btree.cmo buff.cmo iobase.cmo pqueue.cmo consang.cmo consangAll.cmo mk_consang.cmo
GWD_OBJS1 = ::wserver:wserver.cmo argl.cmo lock.cmo adef.cmo iovalue.cmo name.cmo gutil.cmo btree.cmo buff.cmo iobase.cmo pqueue.cmo consang.cmo num.cmo version.cmo util.cmo calendar.cmo date.cmo history.cmo srcfile.cmo perso.cmo update.cmo updateInd.cmo updateIndOk.cmo updateFam.cmo updateFamOk.cmo place.cmo
GWD_OBJS2 = merge.cmo mergeFamOk.cmo mergeFam.cmo mergeInd.cmo mergeIndOk.cmo changeChildren.cmo sendImage.cmo dag2html.cmo dag.cmo relationLink.cmo relation.cmo ascend.cmo descend.cmo birthday.cmo cousins.cmo alln.cmo some.cmo advSearchOk.cmo birthDeath.cmo title.cmo notes.cmo doc.cmo forum.cmo image.cmo family.cmo base64.cmo robot.cmo
GWD_OBJS = {GWD_OBJS1} {GWD_OBJS2} gwd.cmo
GWU_OBJS = argl.cmo adef.cmo iovalue.cmo name.cmo gutil.cmo btree.cmo buff.cmo iobase.cmo select.cmo calendar.cmo gwu.cmo
PHONYGWD_OBJS = ::wserver:wserver.cmo argl.cmo phonygwd.cmo
MOSTDESC_OBJS = adef.cmo name.cmo gutil.cmo iovalue.cmo btree.cmo buff.cmo iobase.cmo pqueue.cmo consang.cmo argl.cmo num.cmo mostdesc.cmo
FPLA_OBJS = argl.cmo adef.cmo name.cmo gutil.cmo btree.cmo buff.cmo iovalue.cmo iobase.cmo fpla.cmo

all Ä out

out ÄÄ def.syn.cmo ansel.cmo gwc.out consang.out gwd.out gwu.out phonygwd.out i18n_check.out mostdesc.out
   delete -y gwc consang gwd gwu
   duplicate -y gwc.out gwc
   duplicate -y consang.out consang
   duplicate -y gwd.out gwd
   duplicate -y gwu.out gwu

clean ÄÄ
   delete -y gwc consang gwd gwu

gwc.out Ä {GWC_OBJS}
   {OCAMLC} -custom unix.cma {GWC_OBJS} {LIBUNIX} -o gwc.out

consang.out Ä {CONSANG_OBJS}
   {OCAMLC} -custom unix.cma {LIBUNIX} {CONSANG_OBJS} -o consang.out

gwd.out Ä {GWD_OBJS}
    {OCAMLC} -custom {OCAMLD} unix.cma {CAMLP4D}:gramlib.cma {GWD_OBJS} {LIBUNIX} -o gwd.out

gwu.out Ä {GWU_OBJS}
    {OCAMLC} -custom unix.cma {LIBUNIX} {GWU_OBJS} -o gwu.out

mostdesc.out Ä {MOSTDESC_OBJS}
    {OCAMLC} -custom unix.cma {LIBUNIX} {MOSTDESC_OBJS} -o mostdesc.out

fpla.out Ä {FPLA_OBJS}
    {OCAMLC} -custom unix.cma {LIBUNIX} {FPLA_OBJS} -o fpla.out

i18n_check.out Ä i18n_check.cmo
    {OCAMLC} i18n_check.cmo -o i18n_check.out

depend Ä
    ::tools:camlp4_depend.mpw {OCAMLI} Å.mli Å.ml > Makefile.Mac.depend.new
    rename Makefile.Mac.depend.new Makefile.Mac.depend
