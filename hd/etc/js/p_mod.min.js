const i={individu:["standard","centered","two cols"],parents:["simple","simple + photos","evolved","complete","complete + photos"],unions:["simple","simple + photos","evolved","complete","complete + photos"],fratrie:["simple","simple + photos","complete","complete + photos"],relations:["simple","complete"],chronologie:["simple","simple + events"],notes:["simple","complete"],sources:["simple","complete"],arbres:["ascendants","horizontal","compact","+3-3 gen.","famille","6 gen","9 gen","HI","descendants"],gr_parents:["standard","three cols"],ligne:["standard"],data_3col:["standard"]};const p=$(".img-prfx").attr("data-prfx");let l=`
<table class="table table-sm table-hover mt-2 mb-0">
  <thead class="thead-default">
    <tr>
      <th>Module</th>
      <th>Options</th>
    </tr>
  </thead>
  <tbody>`;Object.entries(i).forEach(([a,e])=>{l+=`
    <tr>
      <td class="align-middle pmod">${a}</td>
      <td>
        <div class="d-inline-flex">`;e.forEach((e,t)=>{const o=`<button class="btn btn-outline-primary btn-sm mr-1 text-nowrap"
                      type="button" id="pm_${a[0]}${t+1}" title="${a} ${e}"
                      data-toggle="popover" data-trigger="hover" data-placement="bottom" data-html="true"
                      data-content="<img src='${p}/${a}_${t+1}.jpg'>">${e}</button>`;l+=o});l+=`
        </div>
      </td>
    </tr>`});$(".alert").alert();var e='<div id="p_mod_builder">\n</div>\n';$("#p_mod_builder").replaceWith(e);function o(){var e=$("#p_mod").val();var t='<div id="p_mod_builder">';for(var o=0;o<=e.length-2;o+=2){var a="";for(const[r,d]of Object.entries(i)){if(e[o]==r[0]){a=r;break}}var l=e[o+1];if(i.hasOwnProperty(a)){if(l>=1&&l<=i[a].length){var s=e[0]=="z"?"zz_1.jpg":a+"_"+l+".jpg";t+='<img class="rm" src="'+p+"/"+s+'">\n';var n=$("#pm_"+a[0]+parseInt(l,10));if(n.hasClass("btn-outline-primary")){n.removeClass("btn-outline-primary").addClass("btn-primary")}}else{$(".alert").removeClass("d-none");$(".alert-opt").removeClass("d-none");if(!$(".alert-mod").hasClass("d-none")){$(".alert-mod").addClass("d-none")}$("#alert-option").text(l);$("#alert-module").text(a);$("#p_mod").val($("#p_mod").val().slice(0,-2))}}else{$(".alert").removeClass("d-none");$(".alert-mod").removeClass("d-none");if(!$(".alert-opt").hasClass("d-none")){$(".alert-opt").addClass("d-none")}$("#alert-module-2").text(e[o]);$("#p_mod").val($("#p_mod").val().slice(0,-2))}}t+="</div>";$("#p_mod_builder").replaceWith(t)}$("#p_mod_table").replaceWith(l);$(".alert").on("click",function(){$(this).addClass("d-none");$("#p_mod").focus()});$('[data-toggle="popover"]').popover();$("#p_mod").on("input",function(){o();const e=$("#p_mod").val();const t=e.slice(-2);$('[id^="pm_"]').each(function(){const e=this.id.slice(3);if(e===t){$(this).removeClass("btn-outline-primary").addClass("btn-primary")}else{return false}})});$("#p_mod_bvar").on("click",function(){$("#p_mod").val($("#p_mod_bvar").val())});$("#p_mod_rm").on("click",function(){const e=$("#p_mod").val();if(e.length>1){const t=e.slice(-2);const o=e.slice(0,-2);$("#p_mod").val(o);$(".rm:last-child").remove();if(!o.includes(t)){$("#pm_"+t).removeClass("btn-primary").addClass("btn-outline-primary")}}});$("#p_mod_clear").on("click",function(){$("#p_mod").val("");$("#p_mod_builder").replaceWith('<div id="p_mod_builder">\n</div>\n');$('[id^="pm_"]').removeClass("btn-primary").addClass("btn-outline-primary")});$("#zz").on("click",function(){$("#p_mod").val("zz")});$(document).on("click",'[id^="pm_"]',function(){const e=this.id.slice(3);const t=$(this).attr("data-content");const o=$(t).attr("src");$("#p_mod").val($("#p_mod").val()+e);$("#p_mod_builder").append(`<img class="rm" src="${o}">\n`);$("#pm_"+e).removeClass("btn-outline-primary").addClass("btn-primary")});