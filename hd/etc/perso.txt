<!DOCTYPE html>
<html lang="%if;(bvar.default_lang!="" and evar.lang="")%bvar.default_lang;%elseif;(evar.lang!="")%evar.lang;%else;en%end;">
<head>
  <!-- $Id: perso.txt,v7.00 20/11/2016 06:22:34 $ -->
  <!-- Copyright (c) 1998-2016 INRIA -->
  <title>%nn;
    %if;has_public_name;
      %if;has_qualifiers;%public_name; %qualifier;
      %else;%public_name; %surname;%end;
    %else;
      %if;has_qualifiers;%first_name; %qualifier;
      %else;%first_name; %surname;%end;
    %end;
  </title>
  <meta name="robots" content="none">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="%image_prefix;/favicon_gwd.png">
  <link rel="apple-touch-icon" href="%image_prefix;/favicon_gwd.png"%/>
  %include.css;
  %base_header;
</head>
<body%body_prop;>
%message_to_wizard;
<div class="container">
%(include.perso_header;%)
%include.perso_utils;
%import;perso_m_options;
%include.menubar;

%define;init_nb_asc(tplnum)
  %let;templ;%bvar.perso_module_tplnum;%in
  %if;(templ = "famille" or templ = "arbre_3gen_v" or templ = "arbre_3gen_v_photo")
    %if;(count < 3)
      %reset_count;%incr_count;%incr_count;%incr_count;
    %end;
  %elseif;(templ = "arbre_4gen_v")
    %if;(count < 4)
      %reset_count;%incr_count;%incr_count;%incr_count;%incr_count;
    %end;
  %elseif;(templ = "arbre_5gen_h")
    %if;(count < 5)
      %reset_count;%incr_count;%incr_count;%incr_count;%incr_count;%incr_count;
    %end;
  %else;
    %if;(count < 1)
      %reset_count;%incr_count;
    %end;
  %end;
%end

%define;init_nb_desc(tplnum)
  %let;templ;%bvar.perso_module_tplnum;%in
  %if;(templ = "unions")
    %if;(count < 3)
      %reset_count;%incr_count;%incr_count;%incr_count;
    %end;
  %else;
    %if;(count < 1)
      %reset_count;%incr_count;
    %end;
  %end;
%end

%define;init_from_gen_desc(tplnum)
  %let;templ;%bvar.perso_module_tplnum;%in
  %if;(templ = "family")
    %if;(count < 3)
      %reset_count;%incr_count;%incr_count;%incr_count;
    %end;
  %else;
    %if;(count < 1)
      %reset_count;%incr_count;
    %end;
  %end;
%end

%define;init_cache(nb_asc, from_gen_desc, nb_desc)
  %init_cache.nb_asc.from_gen_desc.nb_desc;
%end;

%if;(bvar.p_mod="" and evar.p_mod="" and (bvar.perso_module_tplnb="" or bvar.perso_module_tplnb=0))
  %(Statique %)
  %apply;init_cache(3, 2, 2)
  %if;(has_parents and (father.has_parents or mother.has_parents))
    %let;op_m;3%in;%apply;show_templ("perso_module/gr_parents")
    <div class="row">
      %apply;module_collapse%with;<i class="fa fa-sitemap fa-rotate-180"></i>%and;tree%and;%and;center%end;
        <div class="col-xs-6 offset-xs-3">
          %apply;show_templ("perso_module/tree_3gen_v_photo_header")
        </div>
      </div>
      </div>
    </div>
  %end;
  <div class="row">
    <div class="hidden-sm-down">
      <div class="col-lg-3 push-xs-6 push-md-0">
        %let;op_m;1%in;%apply;show_templ("perso_module/parents")
        %let;op_m;1%in;%apply;show_templ("perso_module/siblings")
      </div>
    </div>
    <div class="col-lg-6 pull-xs-3 pull-md-0">
      %apply;show_templ("perso_module/personnal_data")
      %if;(nb_families > 3)
        %let;op_m;1%in;%apply;show_templ("perso_module/unions")
      %end;
      %let;op_m;1%in;%apply;show_templ("perso_module/timeline")
    </div>
        <div class="hidden-sm-up">
      <div class="col-lg-3">
        %let;op_m;1%in;%apply;show_templ("perso_module/parents")
        %let;op_m;1%in;%apply;show_templ("perso_module/siblings")
      </div>
    </div>
    <div class="col-lg-3">
      %if;(nb_families < 4)
        %let;op_m;1%in;%apply;show_templ("perso_module/unions")
        %let;op_m;1%in;%apply;show_templ("perso_module/relations")
      %end;
    </div>
  </div>
  <div class="row">
    <div class="col-lg-10 offset-lg-1">
      %let;op_m;1%in;%apply;show_templ("perso_module/notes")
      %let;op_m;2%in;%apply;show_templ("perso_module/parents")
      %let;op_m;2%in;%apply;show_templ("perso_module/siblings")
      %let;op_m;3%in;%apply;show_templ("perso_module/unions")
      %let;op_m;1%in;%apply;show_templ("perso_module/sources")
    </div>
  </div>
  <div class="row">
    <div class="col-lg-10 offset-lg-1">
      %let;op_m;8%in;%apply;show_templ("perso_module/trees")
    </div>
  </div>
%elseif;(bvar.perso_module_tplnb!="" and bvar.perso_module_tplnb>0)
  %(Dynamique, perso_module_tplnb : %bvar.perso_module_tplnb;<br>%)
  %reset_count;
  %for;i;0;bvar.perso_module_tplnb;
    %apply;init_nb_asc(i)
  %end;
  %let;nb_asc;%count;%in

  %reset_count;
  %for;i;0;bvar.perso_module_tplnb;
    %apply;init_from_gen_desc(i)
  %end;
  %let;from_gen_desc;%count;%in

  %reset_count;
  %for;i;0;bvar.perso_module_tplnb;
    %apply;init_nb_desc(i)
  %end;
  %let;nb_desc;%count;%in

  %apply;init_cache(nb_asc, from_gen_desc, nb_desc)
  %reset_count;
  <div class="row">
    <div class="col-md-8 offset-md-2 col-xl-6 offset-xl-3">
      %for;i;0;bvar.perso_module_tplnb;
        %apply;get_templ(i)
      %end;
    </div>
  </div>
%elseif;(bvar.p_mod!="" or evar.p_mod!="")
  %(Dynamique avec bvar.p_mod ou evar.p_mod%)
  %apply;init_cache(3, 2, 2)
  %for;i;0;p_mod_nbr;
    %let;mmi;%apply;mm(i)%in;
    %let;ooi;%apply;oo(i)%in;
    %if;(mmi!="" and ooi!=0)
      %apply;get_mod(mmi, ooi)
    %end
  %end;
%end;

%if;(evar.opt = "misc")
  %misc_names;<p>
%end;
%if;(not cancel_links)
  %include.trl;
  %include.copyr;
%end;
</div>
%include.js;
</body>
</html>